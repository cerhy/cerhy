<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<title>好研网-博客中心</title>
<link rel="shortcut icon" href="/${res}/images/cerhyheard.png" type="image/x-icon" />
<script src="${resSys}/jquery.js" type="text/javascript"></script>
<script src="${resSys}/jqueryUI/jquery-ui.js" type="text/javascript"></script>
<script src="${resSys}/front.js" type="text/javascript"></script>
<link type="text/css" rel="stylesheet" href="/${res}/css/main.css" />
<link type="text/css" rel="stylesheet" href="/${res}/css/custom.css" />
<link href="${resSys}/jqueryUI/jquery.ui.css" rel="stylesheet" type="text/css" />
<script src="${resSys}/ckplayer/ckplayer.js" type="text/javascript"></script>
<script src="${resSys}/ckplayer/offlights.js" type="text/javascript"></script>
<script src="/${res}/js/SimpleTree.js"></script>
<script type="text/javascript">

$(function() {
	$('.user-menu-links li').click(function(){
	    $(this).toggleClass('on');
	});
	$(".st_tree").SimpleTree({
		click:function(a){
			if(!$(a).attr("hasChild"))
				alert($(a).attr("ref"));
		}
	});
	$.ajax({
		type:"post",
		url:"${base}/blog/checkout.jspx",
		data:{
			"CUId":${content.user.id},
		},
		success:function(data){
			if(1 == data){
				Cms.collectexist("${base}","${content.id!}","cancelSpan","comfirmSpan");
			}else {
				$("#cancelSpan").hide();
				$("#comfirmSpan").hide();
		    }
	  }
	});
$("#comfirmSpan").click(function(){
    Cms.collect_blog("${base}","${content.id}",1,"cancelSpan","comfirmSpan");
});
$("#cancelSpan").click(function(){
    Cms.collect_blog("${base}","${content.id!}",0,"cancelSpan","comfirmSpan");
});

Cms.checkPerm("${base}", "${content.id}");
Cms.collectCsi("${base}", "collectCsiDiv", "collect_csi",
		"${content.id}");
Cms.attachment("${base}", "${content.id}",
		"${content.attachments?size}", "attach");
Cms.viewCount("${base}", "${content.id}");
Cms.siteFlow("${base}", location.href, document.referrer,
		"${site.config.flowSwitch?string}");
		
});
</script>
<script type="text/javascript">
	jQuery(document).ready(function($) {
		$('.content-comment').click(function() {
			$('html,body').animate({
				scrollTop : $('#comments-text').offset().top
			}, 1000)
			$('#comments-text').focus();
		});
	});

	$(function() {
		//设置一个定时器，为BUTTON点击事件用
		var timer = null;
		var number1 = 0;

		//处理输入的内容是文字还是字母的函数
		function getLength(str) {
			return String(str).replace(/[^\x00-\xff]/g, 'aa').length;
		}
		;
	});
</script>
[#include "head.html"/]
<div class="blogBody">
<div class="blog-con">
  <div class="blogHead">
	  <div class="title1"><a href="${base}/blog/find_all_url_friend.jspx?userIds=${usert.id}"><span id="title1">[#if user.blogTitle??]${user.blogTitle}[#else]标题[/#if]</span></a></div>
	  <div style="font-size:15px;margin:5px auto 15px;">[#if user.blogTitle2??]${user.blogTitle2}[#else]副标题[/#if]</div>
  </div>
  <div class="tj">
	  文章数:${articleCount}&nbsp;&nbsp;
	  评论:${commentCount}&nbsp;&nbsp;
	  访问:${user.blogVisitNum!'0'}&nbsp;&nbsp;
	  最后登录:${user.lastLoginTime?string('yyyy-MM-dd HH:mm:ss')}&nbsp;&nbsp;
  </div>
   <div class="mb20 clearfix">
			<input style="display: none;" id="no" value="">
			<input style="display: none;" id="no1" value="">
			<input style="display: none;" id="no2" value="${user.username}">
		   	<input style="display: none;" id="no3" value="${content.id}">
			<input style="display: none;" id="no4" value="${user.id}">
	 <!-- <div id="fudong" class="fudong" style="border: 0;">
			<h2 class="title">
			<button id="pos" name="pos" class="pos" style="width: 50px;height: 30px;" onclick="down(0)">批注</button>
			</h2>
	</div> -->
     [#include "friend_blog_left.html"/]
     [#include "friend_content.html"/]
       <div class="wrap-right" id="addAttr">
           <div class="personCenter-userInfo blog_right xueke-acticle">
                <div ><h2>${content.title}</h2></div>
                <div class="gray9 h2dt pt5">
				    <span class="pr15">发布时间：${content.releaseDate}</span>
					<span class="pr15">
					   <a target="_blank" href="${base}/blog/find_all_url_friend.jspx?userIds=${content.user.id}" class="bz">博主：${content.user.username}</a>
					 </span>
					 <span class="pr15 yuedu">浏览次数：<span id="views"></span></span> 
					 <span class="pr15 pinglun">评论：${content.commentsCheckedNum!} </span>
				     <span id="comfirmSpan" style="display:none;cursor: pointer;">转载</span>
				     <span id="cancelSpan" style="display:none; cursor: pointer;">取消转载</span>&nbsp;
					 <span class="content-share">分享
						 [#include "../content/inc_share.html"/]
					 </span>&nbsp;
					 <span id="pos" name="pos" class="pos" style="width: 40px;height: 20px;" onclick="down(0)">批注
					 </span>
				</div>
				<div class="xueke-content-detail" style="margin-top:30px;min-height:170px;">
					[#if preview??] [@text_cut s=txt! len=100 append="..."/]<br />
					您需要更高的权限浏览全部内容!<br />以下会员组可浏览全部内容: [#list groups as g]
					${g.name!}[#if g_has_next],[/#if] [/#list] [#else] ${txt!} [/#if]
				</div>
				
			       [#if content.mediaPath?? && content.mediaType??]
			        <div class="video-con clearfix">
				        [#if content.mediaType=='FLV'] 
				        <object height="500" width="100%" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=7,0,19,0" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000">
				        <param name="movie" value="/${res}/img/flvplayer.swf" />
				        <param name="quality" value="high" />
				        <param name="allowFullScreen" value="true" />
				        <param name="FlashVars" value="vcastr_file=${content.mediaPath!}&BufferTime=3" /><embed height="500" width="100%" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" quality="high" flashvars="vcastr_file=${content.mediaPath!}" allowfullscreen="true" src="/${res}/img/flvplayer.swf"></embed>
				        </object>
				        [#elseif content.mediaType=='FLASH'] 
				        <embed height="500" width="100%" type="application/x-shockwave-flash" quality="high" src="${content.mediaPath}" wmode="transparent" align="center"></embed>
				        [#elseif content.mediaType=='CK']
			            <!--ckplayer播放视频-->
			            <div id="video" style="position:relative;z-index: 100;width:100%;height:500px;float: left;"><div id="a1"></div></div>
				    	<script type="text/javascript">
				    	//函数名称不允许更改 function ckmarqueeadv(){return '广告内容'};
						var flashvars={f:'${content.mediaPath!}',c:0,b:1,my_url:'${content.url!}',my_pic:'${content.typeImg!}'};
						var params={bgcolor:'#FFF',allowFullScreen:true,allowScriptAccess:'always'};
						CKobject.embedSWF('${resSys}/ckplayer/ckplayer.swf','a1','ckplayer_a1','100%','500',flashvars,params);
						var box = new LightBox();
						function closelights(){//关灯
							box.Show();
						}
						function openlights(){//开灯
							box.Close();
						}
						</script>
				        [#else] 
				        <embed height="500" width="100%" type="video/x-ms-wmv" src="${content.mediaPath}" console="cons" controls="ImageWindow" autostart="true"></embed>
				        [/#if]
				     </div>
				    [/#if]
				        [#if content.attachments?size gt 0]           
						<h4>附件:</h4>           
						<ul>           
						[#list content.attachments as attach]           
						<li><a href="${attach.path}" id="attach${attach_index}">${attach.name}</a></li>           
						[/#list]           
						</ul>           
					[/#if]
					 
					<!-- 分页 -->
					<div class="pagebar">[#include "../style_page/content.html"/]</div>
					<div class="inter clearfix"> 
				      [#if channel.allowUpdown]
				      <div class="downs" title="踩" ><a onclick="Cms.down('${base}',${content.id},${content.downs});"><span id="downs"></span></a></div>
				      <div class="ups" title="赞"><a onclick="Cms.up('${base}',${content.id},${content.ups});"><span id="ups"></span></a></div>
				      [/#if]
				    </div>
				       
                    <div class="prev-next-wz clearfix">
                 
				   [@cms_content id=content.id next='1' channelId=channel.id userId=GroupFlagData]
                    	[#if tag_bean??]
                    		<a href="${tag_bean.url}?f=${usert.id}&GroupFlag=${GroupFlagData}" class="prev-pian">
                            <span>&lt;上一篇</span>
                            <em>[@text_cut s=tag_bean.title len=20 append='...'/]</em>
                        	</a>
                    	[#else]
                    		<a href="#" class="prev-pian">
                            <em>没有了</em>
                        	</a>
                    	[/#if]
                    	  [/@cms_content]
				   [@cms_content id=content.id next='0' channelId=channel.id userId=GroupFlagData]
	                    [#if tag_bean??]
	                     <a href="${tag_bean.url}?f=${usert.id}&GroupFlag=${GroupFlagData}" class="next-pian">
                            <em>[@text_cut s=tag_bean.title len=20 append='...'/]</em>
                            <span>下一篇&gt;</span>
                        </a>
	                    [#else]
		                     <a href="#" class="next-pian">
	                            <em>没有了</em>
	                        </a>
	                    [/#if]
                    [/@cms_content]
                    </div>
               <div class="news-comments" style="width:665px;">
				    [#if channel.commentControl!=2]
                    [#include "../content/inc_comment_input.html"/]
      				[#include "../content/inc_comment_list.html"/]
    				[/#if]
				</div>
           </div>
       </div>
  </div>
 </div>
</div> 
[#include "model_friend.html"]
[#include "../include/footer.html"/]
</body>
</html>
<script type="text/javascript">
     function down(obj){  
    	 if(obj==0){
	    	 $("#pos").html("退出");
	    	 $("#addAttr").attr("onclick","divPos(this)");
	    	 $("#addAttr").attr("id","addAttrs");
	    	 $("#pos").attr("onclick","down(1)");
	    	 divPos(obj);
    	 }else{
	    	 $("#addAttrs").unbind("mousedown");
	    	 $("#pos").html("批注");
	    	 $("#addAttrs").removeAttr("onclick");
	    	 $("#addAttrs").attr("id","addAttr");
	    	 $("#pos").attr("onclick","down(0)"); 
    	 }
     }
     function divPos(event){
    	 $("#addAttrs").mousedown(function(e){
    		$.kw.confirm("提示内容",e.pageX,e.pageY);
	    	$("#no").val(e.pageX);
	    	$("#no1").val(e.pageY);
    	});
     }
     
</script>
<script type="text/javascript">
//提示框
$(function () {    
    $.kw = {  
        title      : "发表您的看法", //默认标题 可修改  
        speed      : 400, //默认速度 可修改  
        buttonName : "确认", //确定按钮默认名称 可修改  
        cancel     : "取消", //取消按钮默认名称 可修改  
        content    : "Content",  
         //移除遮盖层  
        del : function () {
            $("#alert-layer").remove();
        },  
        //响应ESC键盘退出  
        esc : function () {   
            $(document).keyup(function (event) {  
                if (event.which == 27) {  
                    $.kw.del();  
                }  
            });  
        },  
        //提示  
        confirm : function (sContent,X,Y,callBack, sTitle) {
        	$.kw.del();   
            var title = sTitle || this.title;  
            var content = sContent || this.content;  
            var layer = "<div id='alert-layer' name='alert-layer'><div id='alert-container'><div class='alert-top'></div><div class='alert-box'><div id='alert-title'>" + title + "<div id='alert-close' title='关闭'></div></div><textarea id='posInfo' rows='5' cols='39' onkeyup='okp()'></textarea><div align='right' id='words' style='padding-right:13px;'>字数:30</div><div class='alert-button'><button id='alert-button'>" + this.buttonName + "</button><button id='alert-cancel'>" + this.cancel + "</button></div></div><div class='alert-bottom'></div></div></div>";  
            $(layer).fadeIn(this.speed).appendTo("body");  
            this.setting(X,Y); 
            $("#alert-button").focus(); //获得焦点  
            this.move();//拖动  
            $("#alert-close").bind("click", this.del); //移除层  
            $("#alert-cancel").bind("click", this.del); //移除层  
            $("#alert-button").bind("click", function () {
                var inputInfo=$("#posInfo").val();
                if(inputInfo==''){
                	alert("批注内容不能为空...")
                	return;
                }else{
                	if(inputInfo.length>30){
                		$("#posInfo").val($("#posInfo").val().substring(0,30));
                		$("#words").text("可写字数:"+0);
	                	return;
                	}
                }
                $.kw.del();
                smallIcons(X,Y,inputInfo);	
            });
            this.esc();  
        },              
        //框拖动功能  
        move : function () {  
            $("#alert-title").mousedown(function (event) {  
                var l = parseInt($("#alert-container").css("left"));  
                t = parseInt($("#alert-container").css("top"));  
                x = event.pageX - l;  
                y = event.pageY - t;  
                $("body").bind("mousemove", function (event) {  
                    $("#alert-container").css({  
                        "left" : (event.pageX - x)  
                    });  
                    $("#alert-container").css({  
                        "top" : (event.pageY - y)  
                    });   
                });  
            });  
            $("body").mouseup(function () {  
                $("body").unbind("mousemove");    
            });     
        },  
        //设置背景层与内位置  
        setting : function (X,Y) {
            bsh = document.documentElement.scrollHeight;  
            aw  = $("#alert-container").width() / 2;  
            ah  = $("#alert-container").height() / 2;  
        	$("#alert-layer").css("height", bsh); 
            $("#alert-layer").css("background-color", "transparent");  
        	$("#alert-container").css("position","relative");
            $("#alert-container").css("background-color", "rgb(248, 153, 30)");
            $("#alert-container").css({  
                "top"  : Y,  
                "left" : X 
            });  
        }     
    };  
});  

//事件框随滚动条滚动
window.onscroll=scro;
function scro(){
	if(document.getElementById('alert-layer')!=null){
	 var x=$("#no").val();
	 var y=$("#no1").val();
     bsh = document.documentElement.scrollHeight;  
     aw  = $("#alert-container").width() / 2;  
     ah  = $("#alert-container").height() / 2;  
 	 $("#alert-layer").css("height", bsh); 
	 $("#alert-container").css("position","relative"); 
	 $("#alert-layer").css("background-color", "transparent");  
     $("#alert-container").css("background-color", "rgb(248, 153, 30)"); 
     document.getElementById('alert-container').style.top = y
	}
}


function sleep(numberMillis) {    
	var now = new Date();    
	var exitTime = now.getTime() + numberMillis;   
	while (true) { 
	now = new Date();       
	if (now.getTime() > exitTime) 
	return;    
	} 
}


function smallIcons(X,Y,inputInfo){
	 var now = new Date();    
	 var exitTime = now.getTime();
	 var idss=exitTime
	 var layer = "<div class='"+idss+"' id='"+idss+"'><h2 class='t"+idss+"'></h2></div>";  
     $(layer).fadeIn(400).appendTo("body");
     var oBox = document.getElementById(idss);
     var oTitle = oBox.getElementsByTagName("h2")[0];
     var oDrag = new Drag(oBox, {handle:oTitle, limit:false});
     oDrag.onStop = function ()
 	{
 		//alert("left:" + this.drag.offsetLeft + ", top:" + this.drag.offsetTop);
 		updateDragCoordinate(this.drag.offsetLeft,this.drag.offsetTop,idss);
 	};
     $("#"+idss).css("background","url(/${res}/images/post.png) no-repeat");
     $("#"+idss).css("border","0px solid #f60");
     $("#"+idss).css({  
         "top"  : Y,  
         "left" : X,
         "width":25,
         "height":25
     });
     $(".t"+idss).css({  
         "width":25,
         "height":25,
         "padding-left":25
     }); 
     $("#"+idss).bind("click", function () {
	     $("#"+idss).css("background","url(/${res}/images/post.png) no-repeat rgb(62, 142, 7)");
	     $("#"+idss).css({  
	         "width":170,
	         "height":50
	     });
	     $(".t"+idss).css({  
	         "width":150
	     });
	     $(".t"+idss).text("["+$("#no2").val()+"]"+inputInfo);
	     
     });    
    $("#"+idss).bind("mouseout", function () {
	     $(".t"+idss).text("");
	     $("#"+idss).css("background","url(/${res}/images/post.png) no-repeat");
	     $("#"+idss).css({  
	         "width":25,
	         "height":25
	     });
	     $(".t"+idss).css({  
	         "width":25
	     });
     });
    $("#"+idss).bind("mouseup", function (oEvent) {
    	document.oncontextmenu = function () {
			window.event.returnValue = false; 
		}    
		document.oncontextmenu=function(e){ 
			return false;       
		} 
    	if (!oEvent) oEvent=window.event;
        if (oEvent.button==2) {
        	delAddHtml(idss);
        	$("#"+idss).remove();
        }
     });
     var tpHtml=document.getElementById(idss).outerHTML;//获取整个批注的HTML代码
     var contentId=$("#no3").val();//文章ID
     var userId=$("#no4").val();//添加批注的用户; 
     $.ajax({
         url: "${base}/blog/addTpHtml.jspx?X="+X+"&Y="+Y+"&contentId="+contentId+"&userId="+userId+"&inputInfo="+inputInfo+"&idss="+idss,
         type: "POST",
         dataType:"json",
         data: "",
         success: function (data) {
         }
     }); 
} 

</script>
<script type="text/javascript">
function Drag()
{
	//初始化
	this.initialize.apply(this, arguments)
}
Drag.prototype = {
	//初始化
	initialize : function (drag, options)
	{
		this.drag = this.$(drag);
		this._x = this._y = 0;
		this._moveDrag = this.bind(this, this.moveDrag);
		this._stopDrag = this.bind(this, this.stopDrag);
		
		this.setOptions(options);
		
		this.handle = this.$(this.options.handle);
		this.maxContainer = this.$(this.options.maxContainer);
		
		this.maxTop = Math.max(this.maxContainer.clientHeight, this.maxContainer.scrollHeight) - this.drag.offsetHeight;
		this.maxLeft = Math.max(this.maxContainer.clientWidth, this.maxContainer.scrollWidth) - this.drag.offsetWidth;
		
		this.limit = this.options.limit;
		this.lockX = this.options.lockX;
		this.lockY = this.options.lockY;
		this.lock = this.options.lock;
		
		this.onStart = this.options.onStart;
		this.onMove = this.options.onMove;
		this.onStop = this.options.onStop;
		
		this.handle.style.cursor = "move";
		
		this.changeLayout();
		
		this.addHandler(this.handle, "mousedown", this.bind(this, this.startDrag))
	},
	changeLayout : function ()
	{
		this.drag.style.top = this.drag.offsetTop + "px";
		this.drag.style.left = this.drag.offsetLeft + "px";
		this.drag.style.position = "absolute";
		this.drag.style.margin = "0"
	},
	startDrag : function (event)
	{		
		var event = event || window.event;
		
		this._x = event.clientX - this.drag.offsetLeft;
		this._y = event.clientY - this.drag.offsetTop;
		
		this.addHandler(document, "mousemove", this._moveDrag);
		this.addHandler(document, "mouseup", this._stopDrag);
		
		event.preventDefault && event.preventDefault();
		this.handle.setCapture && this.handle.setCapture();
		
		this.onStart()
	},
	moveDrag : function (event)
	{
		var event = event || window.event;
		
		var iTop = event.clientY - this._y;
		var iLeft = event.clientX - this._x;
		
		if (this.lock) return;
		
		this.limit && (iTop < 0 && (iTop = 0), iLeft < 0 && (iLeft = 0), iTop > this.maxTop && (iTop = this.maxTop), iLeft > this.maxLeft && (iLeft = this.maxLeft));
		
		this.lockY || (this.drag.style.top = iTop + "px");
		this.lockX || (this.drag.style.left = iLeft + "px");
		
		event.preventDefault && event.preventDefault();
		
		this.onMove()
	},
	stopDrag : function ()
	{
		this.removeHandler(document, "mousemove", this._moveDrag);
		this.removeHandler(document, "mouseup", this._stopDrag);
		
		this.handle.releaseCapture && this.handle.releaseCapture();
		
		this.onStop()
	},
	//参数设置
	setOptions : function (options)
	{
		this.options =
		{
			handle:			this.drag, //事件对象
			limit:			true, //锁定范围
			lock:			false, //锁定位置
			lockX:			false, //锁定水平位置
			lockY:			false, //锁定垂直位置
			maxContainer:	document.documentElement || document.body, //指定限制容器
			onStart:		function () {}, //开始时回调函数
			onMove:			function () {}, //拖拽时回调函数
			onStop:			function () {
				
			}  //停止时回调函数
		};
		for (var p in options) this.options[p] = options[p]
	},
	//获取id
	$ : function (id)
	{
		return typeof id === "string" ? document.getElementById(id) : id
	},
	//添加绑定事件
	addHandler : function (oElement, sEventType, fnHandler)
	{
		return oElement.addEventListener ? oElement.addEventListener(sEventType, fnHandler, false) : oElement.attachEvent("on" + sEventType, fnHandler)
	},
	//删除绑定事件
	removeHandler : function (oElement, sEventType, fnHandler)
	{
		return oElement.removeEventListener ? oElement.removeEventListener(sEventType, fnHandler, false) : oElement.detachEvent("on" + sEventType, fnHandler)
	},
	//绑定事件到对象
	bind : function (object, fnHandler)
	{
		return function ()
		{
			return fnHandler.apply(object, arguments)	
		}
	}
};
//应用
/* window.onload = function ()
{
	var oBox = document.getElementById("fudong");
    var padLe=$(".bd-padding").offset().left+865;
	$(oBox).css({
		
	});
	var oTitle = oBox.getElementsByTagName("h2")[0];
	var oDrag = new Drag(oBox, {handle:oTitle, limit:false});
	oDrag.lock = !oDrag.lock;
}; */


/* window.onresize=function(){  
	var padLe=$(".xueke-acticle").offset().left+735;
	$("#fudong").css({
		"left":padLe
	});
} */
</script>
<script type="text/javascript">
	$(function() {
		$.ajax({
	         url: "${base}/blog/searchPostil.jspx?contentId="+$("#no3").val(),
	         type: "POST",
	         dataType:"json",
	         data: "",
	         async: false,
	         success: function (data) {
	 				for(var i=0;i<data.length;i++){
						var layer = data[i].postilDiv;
					    $(layer).fadeIn(400).appendTo("body");
						$("#"+data[i].postilDivId).css("background","url(/${res}/images/post.png) no-repeat");
					    var oBox = document.getElementById(data[i].postilDivId);
					    var oTitle = oBox.getElementsByTagName("h2")[0];
					    var oDrag = new Drag(oBox, {handle:oTitle, limit:false});
					    (function(){
					    var ids=data[i].postilDivId;
					    var nam=data[i].postilName;
					    var inp=data[i].postilInput;
					    oDrag.onStop = function ()
						{
							 updateDragCoordinate(this.drag.offsetLeft,this.drag.offsetTop,ids);
						};
						    $("#"+data[i].postilDivId).bind("click", function () {
							      $("#"+ids).css("background","url(/${res}/images/post.png) no-repeat rgb(62, 142, 7)");
							      $("#"+ids).css({  
							         "width":170,
							         "height":50
							     });
							      $(".t"+ids).css({  
								         "width":150
								     });
							     $(".t"+ids).text("["+nam+"]"+inp);
						     });    
						    $("#"+data[i].postilDivId).bind("mouseout", function () {
							     $("#"+ids).css("background","url(/${res}/images/post.png) no-repeat");
							     $(".t"+ids).text("");
							      $("#"+ids).css({  
							         "width":25,
							         "height":25
							     });
							     $(".t"+ids).css({  
							         "width":25
							     });
						     }); 
						    
						    $("#"+ids).bind("mouseup", function (oEvent) {
						    	document.oncontextmenu = function () {
									window.event.returnValue = false; 
								}    
								document.oncontextmenu=function(e){ 
									return false;       
								} 
						    	if (!oEvent) oEvent=window.event;
						        if (oEvent.button==2) {
						            delAddHtml(ids);
						        	$("#"+ids).unbind("mouseup");
						        	$("#"+ids).remove();
						        }
						     });
							
					    })();    
	 				}
	         }
	     }); 
	});
</script>
<script type="text/javascript">

function updateDragCoordinate(leftX,topY,postilId){
	 $.ajax({
         url: "${base}/blog/updateDragCoordinate.jspx?leftX="+leftX+"&topY="+topY+"&postilId="+postilId,
         type: "POST",
         dataType:"json",
         data: "",
         success: function (data) {
         }
     }); 
}

function delAddHtml(obj){
	 $.ajax({
         url: "${base}/blog/delAddHtml.jspx?postilId="+obj,
         type: "POST",
         dataType:"json",
         data: "",
         success: function (data) {
         }
     });
}


</script>
<script type="text/javascript">
function okp(){
	var i=$("#posInfo").val();
	if(i.length<=30){
	  $("#words").text("可写字数:"+(30-i.length));
	}else{
		$("#posInfo").val($("#posInfo").val().substring(0,30));
		$("#words").text("可写字数:"+0);
	}
}
</script>